# Skychimp

Это веб приложение для создания рассылок и управления ими. 

Пользователь после регистрации сможет добавлять себе новые рассылки, которые можно настраивать по времени запуска, остановки и интервала отправки сообщений. 
Он сможет так же добавить разные сообщения в рассылку. Сервис будет слать каждое сообщение независимо от времени отправки других сообщений рассылки, но по прваилам этой рассылке. То есть, если утром в ежедневную рассылку добавить сообщения "доброе утро!", а вечером "доброй ночи!" то они так и будут приходить в свое время. 
Разумеется он сможет добавлять клиентов к каждой рассылке по отдельности. У клиентов есть адрес электронной почты На него рассылка и отпавляет сообщения.

Пользователь также может привязать свой телеграмм к приложению. В этом случае, после каждой выполненной рассылки телеграм бот будет отправлять ему уведомление. Чтобы это сделать пользователь должен при регистрации указать ссылку на свой телеграмм и отправить боту сообщение "/start". После этого id чата пользователя привяжется к его аккаунту и бот начнет отправлять ему уведомления.

В приложении так же присутствует верификация почты. После регистрации пользователя на почту приходит сообщение. В нем помимо инструкций есть ссылка. При переходе по ней пользователь автоматически верифицирует свой адрес. Если он забудет пароль, то сможет запросить ссылку на смену пароля на почту.

В приложении предусмотрены сотрудники. Менеджер и менеджер контента. Первый может блокировать пользователей и рассылки. Второй может добавлять новые посты в блог.

Блог - это приложение, через которое можно коммуницировать со всеми пользователями рассылок. Имеются ввиду те, кто создает рассылки, а не те, кому приходят сообщения от рассылок. Так в блоге можно делиться, например, лайвхаками по удержанию аудитории или пачноутами о новых возможностях сервиса. 


# Инструкция по запуску веб-приложения Skychimp

Следуйте этим шагам, чтобы успешно запустить веб-приложение Skychimp:

## Шаг 1: Клонирование репозитория

Выполняйте эти команды в той директории, где хотите установить приложение. 
```bash
git clone git@github.com:kolambar/Skychimp.git
cd Skychimp
```

## Шаг 2: Установка зависимостей

```bash
pip install -r requirements.txt
```

## Шаг 3: Настройка .env файла

Создайте файл `.env` в корне проекта и заполните его значениями для переменных, как в `.env.example`.

## Шаг 4: Создание базы данных PostgreSQL

Создайте базу данных в PostgreSQL с именем, соответствующим значению переменной `DATABASE_URL` в вашем файле `.env`.

## Шаг 5: Применение миграций

```bash
python manage.py migrate
```

## Шаг 6: Запуск веб-приложения
Первая консоль:
```bash
python manage.py runserver
```

## Шаг 7: Запуск cron
Вторая консоль:
```bash
python manage.py crontab add
```
В любой момент вы можете посмотреть работает ли задача:
```bash
python manage.py crontab show
```
Вы так же можете остановить задачу:
```bash
python manage.py crontab remove
```

## Шаг 8: Запуск Telegram бота
Вторая консоль:
```bash
python telegram_bot/registration_bot.py
```

Теперь ваше веб-приложение Skychimp должно успешно запуститься. Если возникнут проблемы, пишите мне. Контакты указаны.

Вы также можете создать суперпользователя этой командой:
```bash
python manage.py ccsu
```
Теперь Вам доступен пользователь с логином admin@gmail.com и паролем 6002. Их можно поменять в файле users/management/commands/ccsu.py
Этим пользователем Вы сможете менять любые данные в [админке Django](http://127.0.0.1:8000/admin/), а также назначать менеджеров и контент-менеджеров.
